<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign_Comm_Type</name>
        <label>Assign Comm Type</label>
        <locationX>446</locationX>
        <locationY>974</locationY>
        <assignmentItems>
            <assignToReference>commType</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Communication_Type</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_Comm_Type_Leaflet</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Record_Id</name>
        <label>Assign Record Id</label>
        <locationX>380</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>CurrentUserIdFinal</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CurrentUserId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>IsMobile</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Loggedin_User</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Updated as part of SFS-8263 and SFS-8264</description>
        <name>Assign_SA_Id</name>
        <label>Assign SA Id</label>
        <locationX>248</locationX>
        <locationY>2114</locationY>
        <assignmentItems>
            <assignToReference>SASingleRecordVar.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SASingleRecordVar.FSM_MailjetFieldUpdateDateAndTime__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SASingleRecordVar.FSM_MailJetFieldsToBeBlanked__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BlankFields</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_SA</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Task</name>
        <label>Assign Task</label>
        <locationX>50</locationX>
        <locationY>974</locationY>
        <assignmentItems>
            <assignToReference>commType</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Leaflets</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>FSM_ProformaLeafletVariableAssignmentBlankSubFlow_Flow_1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_User_ID</name>
        <label>Assign User ID</label>
        <locationX>116</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>CurrentUserIdFinal</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>UserId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>IsMobile</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Loggedin_User</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Updated as part of SFS-8263 and SFS-8264</description>
        <name>Copy_1_of_Assign_SA_Id</name>
        <label>Copy 1 of Assign SA Id</label>
        <locationX>578</locationX>
        <locationY>1406</locationY>
        <assignmentItems>
            <assignToReference>SASingleRecordVar.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SASingleRecordVar.FSM_MailjetFieldUpdateDateAndTime__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>SASingleRecordVar.FSM_MailJetFieldsToBeBlanked__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>BlankFields</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Copy_1_of_Update_SA</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>Calling_Cards_Leaflet</name>
        <choiceText>Calling Cards/Leaflet</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Leaflets</stringValue>
        </value>
    </choices>
    <choices>
        <name>English</name>
        <choiceText>English</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>English</stringValue>
        </value>
    </choices>
    <choices>
        <name>English_Welsh</name>
        <choiceText>English &amp; Welsh</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>English &amp; Welsh</stringValue>
        </value>
    </choices>
    <choices>
        <name>HD</name>
        <choiceText>HD</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>HD</stringValue>
        </value>
    </choices>
    <choices>
        <name>Proforma</name>
        <choiceText>Proforma</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Proforma</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varManholeInspectionArea2</name>
        <choiceText>In the public footway/verge/open space</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>In the public footway/verge/open space</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varManholeResponsibility1</name>
        <choiceText>Is a waste water lid that belongs to us</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Is a waste water lid that belongs to us</stringValue>
        </value>
    </choices>
    <choices>
        <name>varManholeResponsibility2</name>
        <choiceText>Is a clean water lid that belongs to us. We will inform our clean water team who will be in touch to plan an inspection</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Is a clean water lid that belongs to us. We will inform our clean water team who will be in touch to plan an inspection</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varManholeResponsibility3</name>
        <choiceText>Belongs to the local highway authority. To find out who your local highway authority is please visit gov.uk/find-local-council</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Belongs to the local highway authority. To find out who your local highway authority is please visit gov.uk/find-local-council</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varManholeResponsibility4</name>
        <choiceText>Belongs to another utility company</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Belongs to another utility company</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varManholeResponsibility5</name>
        <choiceText>Is on private land - please contact a private contractor. You can find one at checkatrade.com</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Is on private land - please contact a private contractor. You can find one at checkatrade.com</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varWasteVisitOutcomes1</name>
        <choiceText>No problems - the drains are flowing as they should</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>No problems - the drains are flowing as they should</stringValue>
        </value>
    </choices>
    <choices>
        <description>created as part of SFS-5347</description>
        <name>varWasteVisitOutcomes2</name>
        <choiceText>&lt;span style=&quot;color: var(--custom-palette-color, inherit);&quot;&gt;We couldn’t get access to the property/land located at:&lt;/span&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>We couldn’t get access to the property/land located at:</stringValue>
        </value>
    </choices>
    <choices>
        <name>Water</name>
        <choiceText>Water</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Water</stringValue>
        </value>
    </choices>
    <decisions>
        <name>Check_Comm_Type_Leaflet</name>
        <label>Check Comm Type : Leaflet ?</label>
        <locationX>446</locationX>
        <locationY>1082</locationY>
        <defaultConnector>
            <targetReference>FSM_SubFlow_Proforma</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Profoma</defaultConnectorLabel>
        <rules>
            <name>Leaflet</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Communication_Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Calling_Cards_Leaflet</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>FSM_Mobile_Subflow_Leaflet</targetReference>
            </connector>
            <label>Leaflet</label>
        </rules>
    </decisions>
    <decisions>
        <description>Created as Part of SFS-5349</description>
        <name>Is_Metering_BU</name>
        <label>Is Metering BU ?</label>
        <locationX>248</locationX>
        <locationY>758</locationY>
        <defaultConnector>
            <targetReference>Select_Communication_Type</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>Yes</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>SASingleRecordVar.FSM_BusinessUnit__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Metering</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Customer_Comms_Metering</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Mobile_Or_Desktop</name>
        <label>Mobile Or Desktop?</label>
        <locationX>248</locationX>
        <locationY>134</locationY>
        <defaultConnector>
            <targetReference>Assign_Record_Id</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Desktop</defaultConnectorLabel>
        <rules>
            <name>Mobile</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_User_ID</targetReference>
            </connector>
            <label>Mobile</label>
        </rules>
    </decisions>
    <description>Sends customer communication by invoking Mailjet
updated as part sfs-5350
updated as part sfs-5347
updated as part sfs-5345
updated as part sfs-5349
updated as part sfs-5348
Updated as part of SFS-7922
Updated as part of SFS-8263 and SFS-8264</description>
    <dynamicChoiceSets>
        <description>created as part of 5351</description>
        <name>cs_customerCoContact</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>FSM_CustCoordinatorNumber__c</picklistField>
        <picklistObject>ServiceAppointment</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>cs_SupportingInformation</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Supporting Information</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_HD__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <valueField>FSM_MailjetURL__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>cs_Template</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Template</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_HD__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <valueField>Mailjet_Id__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>cs_TemplateDevServ</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Template</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_DevServ__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <valueField>Mailjet_Id__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>cs_TemplateHDInspector</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Template</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_Inspector__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>FSM_HD__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <valueField>Mailjet_Id__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>cs_TemplateRM</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Template</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_Water__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>FSM_RMRole__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <valueField>Mailjet_Id__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>cs_TempRMreinst</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Template</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_RMReinstatementRole__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>FSM_HD__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <valueField>Mailjet_Id__c</valueField>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>var_HDrole</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Role</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_HD__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <sortField>FSM_DisplayText__c</sortField>
        <sortOrder>Desc</sortOrder>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>var_WaterRole</name>
        <dataType>String</dataType>
        <displayField>FSM_DisplayText__c</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_ConfigurationType__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Role</stringValue>
            </value>
        </filters>
        <filters>
            <field>FSM_Water__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>FSM_LeafletConfiguration__mdt</object>
        <sortField>FSM_DisplayText__c</sortField>
        <sortOrder>Desc</sortOrder>
    </dynamicChoiceSets>
    <environments>Default</environments>
    <formulas>
        <name>CurrentUserId</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <interviewLabel>Proformas &amp; Customer Comms {!$Flow.CurrentDateTime}</interviewLabel>
    <label>FSM Proformas &amp; Customer Comms</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>FieldServiceMobile</processType>
    <recordCreates>
        <name>Create_Task_Records</name>
        <label>Create Task Records</label>
        <locationX>248</locationX>
        <locationY>2330</locationY>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>CurrentUserIdFinal</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Priority</field>
            <value>
                <stringValue>Normal</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Open</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>var_Template</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <elementReference>commType</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhatId</field>
            <value>
                <elementReference>SASingleRecordVar.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
    </recordCreates>
    <recordLookups>
        <name>Get_Current_SA_Record</name>
        <label>Get Current SA Record</label>
        <locationX>248</locationX>
        <locationY>542</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Related_WorkOrder</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Id</elementReference>
            </value>
        </filters>
        <object>ServiceAppointment</object>
        <outputReference>SASingleRecordVar</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>FSM_BusinessUnit__c</queriedFields>
        <queriedFields>FSSK__FSK_Assigned_Service_Resource__c</queriedFields>
        <queriedFields>FSSK__FSK_Work_Order__c</queriedFields>
        <queriedFields>FSM_WorkOrderAddr__c</queriedFields>
        <queriedFields>FSM_SAPWorkorderNumber__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Loggedin_User</name>
        <label>Get Loggedin User</label>
        <locationX>248</locationX>
        <locationY>434</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Current_SA_Record</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>CurrentUserIdFinal</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputAssignments>
            <assignToReference>var_loggedinUSER</assignToReference>
            <field>FirstName</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Related_WorkOrder</name>
        <label>Get Related WorkOrder</label>
        <locationX>248</locationX>
        <locationY>650</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Is_Metering_BU</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>SASingleRecordVar.FSSK__FSK_Work_Order__c</elementReference>
            </value>
        </filters>
        <object>WorkOrder</object>
        <outputAssignments>
            <assignToReference>woAddress</assignToReference>
            <field>Address</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>woCity</assignToReference>
            <field>City</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>woCountry</assignToReference>
            <field>Country</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>WoContactEmail</assignToReference>
            <field>FSM_ContactEmail__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>WoContactName</assignToReference>
            <field>FSM_ContactName__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>woContactNumber</assignToReference>
            <field>FSM_ContactPhoneNumber__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>WoId</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>woPostalcode</assignToReference>
            <field>PostalCode</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>ServiceReportTemplateId</assignToReference>
            <field>ServiceReportTemplateId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>woState</assignToReference>
            <field>State</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>woStreet</assignToReference>
            <field>Street</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Service_Report_Template_Id</name>
        <label>Get Service Report Template Id</label>
        <locationX>578</locationX>
        <locationY>1622</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Service_Report_Template_Id_on_Workorder</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>FSM_TemplateName__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>TemplateTypeProforma</elementReference>
            </value>
        </filters>
        <object>FSM_ServiceReportTemplates__mdt</object>
        <outputAssignments>
            <assignToReference>ServiceReportTemplateRecId</assignToReference>
            <field>FSM_TemplateId__c</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <name>Copy_1_of_Update_SA</name>
        <label>Copy 1 of Update SA</label>
        <locationX>578</locationX>
        <locationY>1514</locationY>
        <connector>
            <targetReference>Get_Service_Report_Template_Id</targetReference>
        </connector>
        <inputReference>SASingleRecordVar</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_SA</name>
        <label>Update SA</label>
        <locationX>248</locationX>
        <locationY>2222</locationY>
        <connector>
            <targetReference>Create_Task_Records</targetReference>
        </connector>
        <inputReference>SASingleRecordVar</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Service_Report_Template_Id_on_Workorder</name>
        <label>Update Service Report Template Id on Workorder</label>
        <locationX>578</locationX>
        <locationY>1730</locationY>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>WoId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>ServiceReportTemplateId</field>
            <value>
                <elementReference>ServiceReportTemplateRecId</elementReference>
            </value>
        </inputAssignments>
        <object>WorkOrder</object>
    </recordUpdates>
    <screens>
        <name>Select_Communication_Type</name>
        <label>Select Communication Type</label>
        <locationX>446</locationX>
        <locationY>866</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Assign_Comm_Type</targetReference>
        </connector>
        <fields>
            <name>Communication_Type</name>
            <choiceReferences>Calling_Cards_Leaflet</choiceReferences>
            <choiceReferences>Proforma</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Communication Type</fieldText>
            <fieldType>RadioButtons</fieldType>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <styleProperties>
                <verticalAlignment>
                    <stringValue>top</stringValue>
                </verticalAlignment>
                <width>
                    <stringValue>12</stringValue>
                </width>
            </styleProperties>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <start>
        <locationX>122</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Mobile_Or_Desktop</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <subflows>
        <name>Customer_Comms_Metering</name>
        <label>Customer Comms Metering</label>
        <locationX>50</locationX>
        <locationY>866</locationY>
        <connector>
            <targetReference>Assign_Task</targetReference>
        </connector>
        <flowName>FSM_Mobile_Subflow_Customer_Comms_Metering</flowName>
        <inputAssignments>
            <name>var_CurrentUserName</name>
            <value>
                <elementReference>var_loggedinUSER</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WoContactEmail</name>
            <value>
                <elementReference>WoContactEmail</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>SASingleRecordVar</assignToReference>
            <name>SASingleRecordVar</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>var_Template</assignToReference>
            <name>varTemplate</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <description>created as part of SFS-5345</description>
        <name>FSM_Mobile_Subflow_Leaflet</name>
        <label>FSM Mobile Subflow  - Leaflet</label>
        <locationX>314</locationX>
        <locationY>1190</locationY>
        <connector>
            <targetReference>FSM_ProformaLeafletVariableAssignmentBlankSubFlow_Flow_1_Leaflet</targetReference>
        </connector>
        <flowName>FSM_Mobile_Subflow_Leaflet</flowName>
        <inputAssignments>
            <name>SABusinessUnit</name>
            <value>
                <elementReference>SASingleRecordVar.FSM_BusinessUnit__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>var_CurrentUserName</name>
            <value>
                <elementReference>var_loggedinUSER</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>var_ServiceResource</name>
            <value>
                <elementReference>var_Template</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WoContactEmail</name>
            <value>
                <elementReference>WoContactEmail</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WoContactName</name>
            <value>
                <elementReference>WoContactName</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>SASingleRecordVar</assignToReference>
            <name>SASingleRecordVar</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>var_Template</assignToReference>
            <name>var_template</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <description>SFS-8263 and SFS-8264</description>
        <name>FSM_ProformaLeafletVariableAssignmentBlankSubFlow_Flow_1</name>
        <label>FSM_ProformaLeafletVariableAssignmentBlankSubFlow Flow 1</label>
        <locationX>50</locationX>
        <locationY>1082</locationY>
        <connector>
            <targetReference>Assign_SA_Id</targetReference>
        </connector>
        <flowName>FSM_ProformaLeafletVariableAssignmentBlankSubFlow</flowName>
        <inputAssignments>
            <name>SASingleRecordVar</name>
            <value>
                <elementReference>SASingleRecordVar</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Type</name>
            <value>
                <stringValue>Metering</stringValue>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>BlankFields</assignToReference>
            <name>BlankFields</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <description>SFS-8263 and SFS-8264</description>
        <name>FSM_ProformaLeafletVariableAssignmentBlankSubFlow_Flow_1_Leaflet</name>
        <label>FSM_ProformaLeafletVariableAssignmentBlankSubFlow Flow 1 Leaflet</label>
        <locationX>314</locationX>
        <locationY>1298</locationY>
        <connector>
            <targetReference>Assign_SA_Id</targetReference>
        </connector>
        <flowName>FSM_ProformaLeafletVariableAssignmentBlankSubFlow</flowName>
        <inputAssignments>
            <name>SASingleRecordVar</name>
            <value>
                <elementReference>SASingleRecordVar</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Type</name>
            <value>
                <stringValue>Leaflet</stringValue>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>BlankFields</assignToReference>
            <name>BlankFields</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <description>SFS-8263 and SFS-8264</description>
        <name>FSM_ProformaLeafletVariableAssignmentBlankSubFlow_Flow_1_Proforma</name>
        <label>FSM_ProformaLeafletVariableAssignmentBlankSubFlow Flow 1 Proforma</label>
        <locationX>578</locationX>
        <locationY>1298</locationY>
        <connector>
            <targetReference>Copy_1_of_Assign_SA_Id</targetReference>
        </connector>
        <flowName>FSM_ProformaLeafletVariableAssignmentBlankSubFlow</flowName>
        <inputAssignments>
            <name>CustTelephone</name>
            <value>
                <elementReference>CustTelephone</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>SASingleRecordVar</name>
            <value>
                <elementReference>SASingleRecordVar</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Telephone</name>
            <value>
                <elementReference>Telephone</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Telephone2</name>
            <value>
                <elementReference>Telephone2</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>Type</name>
            <value>
                <stringValue>Proforma</stringValue>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>BlankFields</assignToReference>
            <name>BlankFields</name>
        </outputAssignments>
    </subflows>
    <subflows>
        <name>FSM_SubFlow_Proforma</name>
        <label>FSM SubFlow Proforma</label>
        <locationX>578</locationX>
        <locationY>1190</locationY>
        <connector>
            <targetReference>FSM_ProformaLeafletVariableAssignmentBlankSubFlow_Flow_1_Proforma</targetReference>
        </connector>
        <flowName>FSM_Mobile_SubFlow_Proforma</flowName>
        <inputAssignments>
            <name>BusinessUnit</name>
            <value>
                <elementReference>SASingleRecordVar.FSM_BusinessUnit__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>saAddress</name>
            <value>
                <elementReference>SASingleRecordVar.FSM_WorkOrderAddr__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varCurrentUserName</name>
            <value>
                <elementReference>var_loggedinUSER</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woAddress</name>
            <value>
                <elementReference>woAddress</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woCity</name>
            <value>
                <elementReference>woCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WoContactEmail</name>
            <value>
                <elementReference>WoContactEmail</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>WoContactName</name>
            <value>
                <elementReference>WoContactName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woContactNumber</name>
            <value>
                <elementReference>woContactNumber</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woCountry</name>
            <value>
                <elementReference>woCountry</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woOrderNumber</name>
            <value>
                <elementReference>SASingleRecordVar.FSM_SAPWorkorderNumber__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woPostalCode</name>
            <value>
                <elementReference>woPostalcode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woState</name>
            <value>
                <elementReference>woState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>woStreet</name>
            <value>
                <elementReference>woStreet</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>CustTelephone</assignToReference>
            <name>CustTelephone</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>SASingleRecordVar</assignToReference>
            <name>SASingleRecordVar</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Telephone2</assignToReference>
            <name>Telephone2</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Telephone</assignToReference>
            <name>TelephoneAssign</name>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>TemplateTypeProforma</assignToReference>
            <name>TemplateTypeAssignment</name>
        </outputAssignments>
    </subflows>
    <variables>
        <description>SFS-8263 and SFS-8264</description>
        <name>BlankFields</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>commType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CurrentUserIdFinal</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>SFS-8264</description>
        <name>CustTelephone</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Id</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>IsMobile</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SABusinessUnit</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>created as part of SFS-5349</description>
        <name>SACustomerEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>SASingleRecordVar</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>ServiceAppointment</objectType>
    </variables>
    <variables>
        <name>SAworkOrder</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ServiceReportTemplateId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>ServiceReportTemplateRecId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TaskRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Task</objectType>
    </variables>
    <variables>
        <description>SFS-8264</description>
        <name>Telephone</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>SFS-8264</description>
        <name>Telephone2</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>TemplateTypeProforma</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>UserId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_leafletCMDT</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FSM_LeafletConfiguration__mdt</objectType>
    </variables>
    <variables>
        <name>var_loggedinUSER</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>var_Template</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varHDrole</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>FSM_LeafletConfiguration__mdt</objectType>
    </variables>
    <variables>
        <name>varTaskRecord</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woAddress</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>woCity</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>WoContactEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>WoContactName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woContactNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woCountry</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>WoId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woOrderNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woPostalcode</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woState</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woStreet</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>woTelphoneNumber</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
</Flow>
